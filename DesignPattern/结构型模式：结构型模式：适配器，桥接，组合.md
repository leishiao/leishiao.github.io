# 结构型模式：适配器，桥接，组合

## 结构型模式：

结构型模式（Structural Pattern）描述如何将类或者对象结合在一起形成更大的结构。

结构型模式可以描述两种不同的东西，类与类的实例（即对象）。根据这一点，结构型模式可以分为类结构型模式和对象结构型模式。

类结构型模式关心类的组合，由多个类可以组成一个更大的系统，在类结构型模式中一般只存在**继承关系**和**实现关系**。

对象结构型模式关系类与对象的组合，通过**关联关系**使得在一个类中定义另一个类的实例对象，然后通过该对象调用其方法。

## 适配器模式

**适配器模式（Adapter Pattern）定义：**

将一个接口转换成客户希望的另一个接口，适配器模式使接口不兼容的类可以一起工作，其别名为包装器（Wrapper）。适配器模式即可作为类结构型模式，也可以作为对象结构型模式。

英文定义：Convert the interface of a class into another interface clients expect. Adapter lets classes work together that couldn't otherwise because of incompatible interfaces.

**适配器模式结构：**

适配器模式包括类适配器和对象适配器，下面分别对两种适配器进行结构分析。

适配器包含如下角色：

1. Target(目标抽象类)

目标抽象类定义客户要用的特定领域的接口。

2. Adapter（适配器类）

适配器类可以调用另一个接口，作为一个转换器，对Adapter和Target进行适配。适配器Adapter是适配器模式的核心。在类适配器中，它通过实现Target接口并继承Adaptee类来使二者产生联系；在对象适配器中，它通过继承Target并关联一个Adaptee对象使二者产生联系。

3. Adaptee（适配者类）

适配者即被适配的角色，它定义了一个已经存在的接口，这个接口需要适配。适配者类一般是一个具体类，这个类定义了客户希望使用的业务接口，在某些情况下甚至没有适配者类的源代码。

4. Client（客户类）

在客户类中针对目标抽象类进行编程，调用在目标抽象类中定义的业务方法。

**适配器模式扩展：**

缺省适配器模式（Default Adapter Pattern）的定义：当不需要实现接口提供的全部方法时，可先设计一个抽象类实现该接口，并为接口中的每个方法提供一个默认实现（空方法），那么该抽象类的子类可以有选择地覆盖方法来实现需求。它适用于一个接口不想使用其所有方法的情况。

在缺省适配器模式中，包含三个角色：适配者接口、缺省适配器类、具体业务类。

**小结：**

（1）适配器模式更多的是强调对代码的组织，而不是功能的实现。

（2）与类适配者模式相比，对象适配者模式想要置换适配者类的方法就不容易。

## 桥接模式

桥接模式（Bridge）定义：

将抽象部分与它的实现部分分离，是他们都可以独立的变化。它是一种对象结构型模式，又称为柄体模式（Handle and Body)或接口模式（Interface）。

英文定义: Decouple an abstraction from its implementation so that the two can vary independently.

**桥接模式结构：**

桥接模式包含如下角色：

1. Abstraction（抽象类）

用于定义抽象类的接口，它一般是抽象类而不是接口，其中定义了一个Implementor（实现抽线类）类型的对象，并可以维护该对象，它与Implementor之间具有关联关系，它可以包含抽线的业务方法，还可以包含具体的业务方法。

2. RefinedAbstraction（扩充抽象类）