## 外观模式

**外观模式（Composite Pattern）定义：**

为子系统中的一组接口提供一个统一的入口。外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。在外观模式中，外部与一个子系统的通信可以通过一个统一的外观对象进行。

英文定义：Provide a unified interface to a set of interfaces in a subsystem. Facade defines a higher-level interfaces that make the subsystem easier to use.

**动机**

将一个系统划分为若干个子系统，有利于降低系统的复杂性。一个常见的设计目标是使子系统间的通信和相互依赖关系达到最小。达到该目标的途径之一就是引入一个外观对象，它为系统中较一般的设施提供了一个单一而简单的界面。

**适用性**

当遇到以下情况适用Facade模式

- 当你要为一个复杂子系统提供一个简单接口时。子系统往往因为不断演化而变得越来越复杂。大多数模式使用时都会产生更过更小的类。这使得子系统更具可重用性，也更容易进行定制。但这也给那些不需要定制子系统的用户带来使用上的困难。Facade提供一个简单的缺省视图，这个视图对大多数用户来说已经足够，而那些需要更多定制性的用户可以越过Facade层。
- 客户程序与抽象类的实现部分之间有很大的依赖性。通过引入一个facade将这个子系统与客户程序以及其他的子系统分离，可以提高子系统的独立性和可移植性。
- 当你需要构建一个层次结构的子系统时，使用facade模式定义子系统中每层的入口点。如果子系统之间是相互依赖的，你可以让它们仅通过facade进行通信，从而简化了它们之间的依赖关系。

**参与者**

- Facade
  知道那些子系统类负责处理请求。
  将客户的请求代理给适当的子系统类。
- Subsystem classes
  实现子系统的功能。
  完成Facade指派的任务。
  没有facade的任何信息，即没有facade的引用。

**协助**

- 客户程序通过发送请求给Facade的方式与子系统通讯，Facade 将请求转发给适当的子系统对象。尽管是子系统中的有关对象在做实际的工作，但Facade模式本身也必须将它的接口转化成子系统的接口。
- 使用Facade的客户程序不需要直接访问子系统对象。

**效果**

1. 它对客户屏蔽了子系统组件，因而减少了客户处理的对象数量，并且使得子系统使用起来更加方便。
2. 实现了客户与子系统之间的松耦合关系，而子系统内部的功能组件往往是紧耦合的。松耦合关系使得子系统组件的变化不会影响到它的客户。Facade模式有助于建立层次结构系统，也有助于对对象之间的依赖关系分层。Facade模式可以消除复杂的循环依赖关系。
3. 如果应用需要，它并不限制它们使用子系统类。因此你可以在系统易用性和通用性之间加以选择。

**实现**

使用Facade模式时需要注意一下几点：

1. **降低客户-子系统之间的耦合度**	用抽象类实现Facade，而它的具体子类对应不同的子系统实现，这可以进一步降低客户与子系统的耦合度。这样，客户就可以通过抽象的Facade与子系统通讯。这种抽象耦合关系使客户不知道它使用的是哪一个子系统实现。
   除了使用生成子类的方法以外，另一种方法是，用不同的子系统对象配置Facade对象。为定制facade，仅需替换它的子系统对象（一个或多个）即可。
2. **公共子系统类和私有子系统类**    一个子系统与一个类的相似之处是，它们都有接口并且它们都封装了一些东西，类封装了状态和操作，而子系统封装了一些类。考虑一个类的公有和私有接口是有益的，我们也可以考虑子系统的公共和私有接口。
   子系统的公共接口包含所有客户程序可以访问的类，私有接口仅用于对子系统进行扩充。当然，Facade是公共接口的一部分，但它不是唯一的部分，子系统的其他部分通常也是公共的。

**相关模式**

​	Abstract Factory 模式可以与Facade模式一起使用以提供一个接口，这一接口可以用来以一种子系统独立的方式创建子系统对象。Abstract Factory 也可以替代Facade模式隐藏那些平台相关的类。

​	Mediator 模式与Facade模式的相似之处是，他抽象了一些已有类的功能。然而，Mediator的目的是对同事之间的任意通讯进行抽象，通常集中不属于单个对象的功能。Mediator的同事对象知道中介者并与它通信，而不是直接与其他同类对象通信。相对而言，Facade模式仅对子系统对象的接口进行抽象，从而使他们更容易使用，它并不定义新功能，子系统也不知道facade的存在。

​	通常来讲，仅需要一个Facade对象，因此Facade对象通常属于Singleton模式。